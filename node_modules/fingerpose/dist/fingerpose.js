!function(i,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.fp=t():i.fp=t()}("undefined"!=typeof self?self:this,(function(){return function(i){var t={};function e(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return i[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=i,e.c=t,e.d=function(i,t,n){e.o(i,t)||Object.defineProperty(i,t,{enumerable:!0,get:n})},e.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,t){if(1&t&&(i=e(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.__esModule)return i;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var a in i)e.d(n,a,function(t){return i[t]}.bind(null,a));return n},e.n=function(i){var t=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(t,"a",t),t},e.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},e.p="",e(e.s=0)}([function(i,t,e){"use strict";e.r(t);var n={};e.r(n),e.d(n,"VictoryGesture",(function(){return c})),e.d(n,"ThumbsUpGesture",(function(){return g})),e.d(n,"RockSignGesture",(function(){return D})),e.d(n,"PointLeftGesture",(function(){return f})),e.d(n,"PointRightGesture",(function(){return R}));const a={Thumb:0,Index:1,Middle:2,Ring:3,Pinky:4,all:[0,1,2,3,4],nameMapping:{0:"Thumb",1:"Index",2:"Middle",3:"Ring",4:"Pinky"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:function(i){return void 0!==typeof this.nameMapping[i]&&this.nameMapping[i]},getPoints:function(i){return void 0!==typeof this.pointsMapping[i]&&this.pointsMapping[i]}},r={NoCurl:0,HalfCurl:1,FullCurl:2,nameMapping:{0:"No Curl",1:"Half Curl",2:"Full Curl"},getName:function(i){return void 0!==typeof this.nameMapping[i]&&this.nameMapping[i]}},o={VerticalUp:0,VerticalDown:1,HorizontalLeft:2,HorizontalRight:3,DiagonalUpRight:4,DiagonalUpLeft:5,DiagonalDownRight:6,DiagonalDownLeft:7,nameMapping:{0:"Vertical Up",1:"Vertical Down",2:"Horizontal Left",3:"Horizontal Right",4:"Diagonal Up Right",5:"Diagonal Up Left",6:"Diagonal Down Right",7:"Diagonal Down Left"},getName:function(i){return void 0!==typeof this.nameMapping[i]&&this.nameMapping[i]}};class l{constructor(i){this.options={HALF_CURL_START_LIMIT:60,NO_CURL_START_LIMIT:130,DISTANCE_VOTE_POWER:1.1,SINGLE_ANGLE_VOTE_POWER:.9,TOTAL_ANGLE_VOTE_POWER:1.6,...i}}estimate(i){let t=[],e=[];for(let n of a.all){let r=a.getPoints(n),o=[],l=[];for(let t of r){let e=i[t[0]],n=i[t[1]],a=this.getSlopes(e,n),r=a[0],d=a[1];o.push(r),l.push(d)}t.push(o),e.push(l)}let n=[],r=[];for(let e of a.all){let o=e==a.Thumb?1:0,l=a.getPoints(e),d=i[l[o][0]],u=i[l[o+1][1]],c=i[l[3][1]],s=this.estimateFingerCurl(d,u,c),g=this.calculateFingerDirection(d,u,c,t[e].slice(o));n[e]=s,r[e]=g}return{curls:n,directions:r}}getSlopes(i,t){let e=this.calculateSlope(i[0],i[1],t[0],t[1]);return 2==i.length?e:[e,this.calculateSlope(i[1],i[2],t[1],t[2])]}angleOrientationAt(i,t=1){let e=0,n=0,a=0;return i>=75&&i<=105?e=1*t:i>=25&&i<=155?n=1*t:a=1*t,[e,n,a]}estimateFingerCurl(i,t,e){let n=i[0]-t[0],a=i[0]-e[0],o=t[0]-e[0],l=i[1]-t[1],d=i[1]-e[1],u=t[1]-e[1],c=i[2]-t[2],s=i[2]-e[2],g=t[2]-e[2],h=Math.sqrt(n*n+l*l+c*c),D=Math.sqrt(a*a+d*d+s*s),p=Math.sqrt(o*o+u*u+g*g),f=(p*p+h*h-D*D)/(2*p*h);f>1?f=1:f<-1&&(f=-1);let C,R=Math.acos(f);return R=57.2958*R%180,C=R>this.options.NO_CURL_START_LIMIT?r.NoCurl:R>this.options.HALF_CURL_START_LIMIT?r.HalfCurl:r.FullCurl,C}estimateHorizontalDirection(i,t,e,n){let a;return a=n==Math.abs(i)?i>0?o.HorizontalLeft:o.HorizontalRight:n==Math.abs(t)?t>0?o.HorizontalLeft:o.HorizontalRight:e>0?o.HorizontalLeft:o.HorizontalRight,a}estimateVerticalDirection(i,t,e,n){let a;return a=n==Math.abs(i)?i<0?o.VerticalDown:o.VerticalUp:n==Math.abs(t)?t<0?o.VerticalDown:o.VerticalUp:e<0?o.VerticalDown:o.VerticalUp,a}estimateDiagonalDirection(i,t,e,n,a,r,l,d){let u,c=this.estimateVerticalDirection(i,t,e,n),s=this.estimateHorizontalDirection(a,r,l,d);return u=c==o.VerticalUp?s==o.HorizontalLeft?o.DiagonalUpLeft:o.DiagonalUpRight:s==o.HorizontalLeft?o.DiagonalDownLeft:o.DiagonalDownRight,u}calculateFingerDirection(i,t,e,n){let a=i[0]-t[0],r=i[0]-e[0],o=t[0]-e[0],l=i[1]-t[1],d=i[1]-e[1],u=t[1]-e[1],c=Math.max(Math.abs(a),Math.abs(r),Math.abs(o)),s=Math.max(Math.abs(l),Math.abs(d),Math.abs(u)),g=0,h=0,D=0,p=s/(c+1e-5);p>1.5?g+=this.options.DISTANCE_VOTE_POWER:p>.66?h+=this.options.DISTANCE_VOTE_POWER:D+=this.options.DISTANCE_VOTE_POWER;let f=Math.sqrt(a*a+l*l),C=Math.sqrt(r*r+d*d),R=Math.sqrt(o*o+u*u),m=Math.max(f,C,R),M=i[0],L=i[1],U=e[0],T=e[1];m==f?(U=e[0],T=e[1]):m==R&&(M=t[0],L=t[1]);let b,H=[M,L],x=[U,T],I=this.getSlopes(H,x),y=this.angleOrientationAt(I,this.options.TOTAL_ANGLE_VOTE_POWER);g+=y[0],h+=y[1],D+=y[2];for(let i of n){let t=this.angleOrientationAt(i,this.options.SINGLE_ANGLE_VOTE_POWER);g+=t[0],h+=t[1],D+=t[2]}return b=g==Math.max(g,h,D)?this.estimateVerticalDirection(d,l,u,s):D==Math.max(h,D)?this.estimateHorizontalDirection(r,a,o,c):this.estimateDiagonalDirection(d,l,u,s,r,a,o,c),b}calculateSlope(i,t,e,n){let a=(t-n)/(i-e),r=180*Math.atan(a)/Math.PI;return r<=0?r=-r:r>0&&(r=180-r),r}}class d{constructor(i){this.name=i,this.curls={},this.directions={}}addCurl(i,t,e=1){void 0===this.curls[i]&&(this.curls[i]=[]),this.curls[i].push([t,e])}addDirection(i,t,e=1){void 0===this.directions[i]&&(this.directions[i]=[]),this.directions[i].push([t,e])}matchAgainst(i,t){let e=0,n=0;for(let t in i){let a=i[t],r=this.curls[t];if(void 0===r)continue;n++;let o=!1,l=0;for(const[i,t]of r)if(a==i){e+=t,l=Math.max(l,t),o=!0;break}o||(e-=l)}for(let i in t){let a=t[i],r=this.directions[i];if(void 0===r)continue;n++;let o=!1,l=0;for(const[i,t]of r)if(a==i){e+=t,l=Math.max(l,t),o=!0;break}o||(e-=l)}return e/n*10}}const u=new d("victory");u.addDirection(a.Thumb,o.VerticalUp,1),u.addDirection(a.Thumb,o.DiagonalUpLeft,1),u.addDirection(a.Thumb,o.DiagonalUpRight,1),u.addCurl(a.Index,r.NoCurl,1),u.addDirection(a.Index,o.VerticalUp,1),u.addDirection(a.Index,o.DiagonalUpLeft,1),u.addDirection(a.Index,o.DiagonalUpRight,1),u.addDirection(a.Index,o.HorizontalLeft,1),u.addDirection(a.Index,o.HorizontalRight,1),u.addCurl(a.Middle,r.NoCurl,1),u.addDirection(a.Middle,o.VerticalUp,1),u.addDirection(a.Middle,o.DiagonalUpLeft,1),u.addDirection(a.Middle,o.DiagonalUpRight,1),u.addDirection(a.Middle,o.HorizontalLeft,1),u.addDirection(a.Middle,o.HorizontalRight,1),u.addCurl(a.Ring,r.FullCurl,1),u.addCurl(a.Ring,r.HalfCurl,.9),u.addCurl(a.Pinky,r.FullCurl,1),u.addCurl(a.Pinky,r.HalfCurl,.9);var c=u;const s=new d("thumbs_up");s.addCurl(a.Thumb,r.NoCurl,1),s.addDirection(a.Thumb,o.VerticalUp,1),s.addDirection(a.Thumb,o.DiagonalUpLeft,.9),s.addDirection(a.Thumb,o.DiagonalUpRight,.9);for(let i of[a.Index,a.Middle,a.Ring,a.Pinky])s.addCurl(i,r.FullCurl,1),s.addCurl(i,r.HalfCurl,.9);s.addDirection(a.Index,o.DiagonalUpLeft,1),s.addDirection(a.Index,o.HorizontalLeft,1),s.addDirection(a.Index,o.HorizontalRight,1),s.addDirection(a.Index,o.DiagonalUpRight,1);var g=s;const h=new d("RockSign");h.addDirection(a.Thumb,o.VerticalUp,1),h.addDirection(a.Thumb,o.VerticalUp,.9),h.addDirection(a.Thumb,o.DiagonalUpLeft,1),h.addDirection(a.Thumb,o.DiagonalUpRight,1),h.addDirection(a.Thumb,o.DiagonalUpLeft,.9),h.addDirection(a.Thumb,o.DiagonalUpRight,.9),h.addCurl(a.Index,r.NoCurl,1),h.addCurl(a.Index,r.NoCurl,.9),h.addDirection(a.Index,o.VerticalUp,1),h.addDirection(a.Index,o.VerticalUp,.9),h.addDirection(a.Index,o.DiagonalUpLeft,1),h.addDirection(a.Index,o.DiagonalUpLeft,.9),h.addDirection(a.Index,o.DiagonalUpRight,1),h.addDirection(a.Index,o.DiagonalUpRight,.9),h.addCurl(a.Middle,r.FullCurl,1),h.addCurl(a.Middle,r.FullCurl,.9),h.addDirection(a.Middle,o.VerticalUp,1),h.addDirection(a.Middle,o.VerticalUp,.9),h.addDirection(a.Middle,o.DiagonalUpLeft,1),h.addDirection(a.Middle,o.DiagonalUpLeft,.9),h.addDirection(a.Middle,o.DiagonalUpRight,1),h.addDirection(a.Middle,o.DiagonalUpRight,.9),h.addCurl(a.Ring,r.FullCurl,1),h.addCurl(a.Ring,r.FullCurl,.9),h.addDirection(a.Ring,o.VerticalUp,1),h.addDirection(a.Ring,o.VerticalUp,.9),h.addDirection(a.Ring,o.DiagonalUpLeft,1),h.addDirection(a.Ring,o.DiagonalUpLeft,.9),h.addDirection(a.Ring,o.DiagonalUpRight,1),h.addDirection(a.Ring,o.DiagonalUpRight,.9),h.addCurl(a.Pinky,r.NoCurl,1),h.addCurl(a.Pinky,r.NoCurl,.9),h.addDirection(a.Pinky,o.VerticalUp,1),h.addDirection(a.Pinky,o.VerticalUp,.9),h.addDirection(a.Pinky,o.DiagonalUpLeft,1),h.addDirection(a.Pinky,o.DiagonalUpLeft,.9),h.addDirection(a.Pinky,o.DiagonalUpRight,1),h.addDirection(a.Pinky,o.DiagonalUpRight,.9);var D=h;const p=new d("PointLeft");p.addDirection(a.Thumb,o.NoCurl,1),p.addDirection(a.Thumb,o.NoCurl,.9),p.addDirection(a.Thumb,o.HorizontalLeft,1),p.addDirection(a.Thumb,o.HorizontalLeft,1),p.addCurl(a.Index,r.NoCurl,1),p.addCurl(a.Index,r.NoCurl,.9),p.addCurl(a.Index,r.HalfCurl,1),p.addCurl(a.Index,r.HalfCurl,.9),p.addDirection(a.Index,o.HorizontalLeft,1),p.addDirection(a.Index,o.HorizontalLeft,.9),p.addCurl(a.Middle,r.FullCurl,1),p.addCurl(a.Middle,r.FullCurl,.9),p.addDirection(a.Middle,o.HorizontalLeft,1),p.addDirection(a.Middle,o.HorizontalLeft,.9),p.addCurl(a.Ring,r.FullCurl,1),p.addCurl(a.Ring,r.FullCurl,.9),p.addDirection(a.Ring,o.HorizontalLeft,1),p.addDirection(a.Ring,o.HorizontalLeft,.9),p.addCurl(a.Pinky,r.FullCurl,1),p.addCurl(a.Pinky,r.FullCurl,.9),p.addDirection(a.Pinky,o.HorizontalLeft,1),p.addDirection(a.Pinky,o.HorizontalLeft,.9);var f=p;const C=new d("PointRight");C.addDirection(a.Thumb,o.NoCurl,1),C.addDirection(a.Thumb,o.NoCurl,.9),C.addDirection(a.Thumb,o.HorizontalRight,1),C.addDirection(a.Thumb,o.HorizontalRight,1),C.addCurl(a.Index,r.NoCurl,1),C.addCurl(a.Index,r.NoCurl,.9),C.addCurl(a.Index,r.HalfCurl,1),C.addCurl(a.Index,r.HalfCurl,.9),C.addDirection(a.Index,o.HorizontalRight,1),C.addDirection(a.Index,o.HorizontalRight,.9),C.addCurl(a.Middle,r.FullCurl,1),C.addCurl(a.Middle,r.FullCurl,.9),C.addDirection(a.Middle,o.HorizontalRight,1),C.addDirection(a.Middle,o.HorizontalRight,.9),C.addCurl(a.Ring,r.FullCurl,1),C.addCurl(a.Ring,r.FullCurl,.9),C.addDirection(a.Ring,o.HorizontalRight,1),C.addDirection(a.Ring,o.HorizontalRight,.9),C.addCurl(a.Pinky,r.FullCurl,1),C.addCurl(a.Pinky,r.FullCurl,.9),C.addDirection(a.Pinky,o.HorizontalRight,1),C.addDirection(a.Pinky,o.HorizontalRight,.9);var R=C;t.default={GestureEstimator:class{constructor(i,t={}){this.estimator=new l(t),this.gestures=i}estimate(i,t){let e=[];const n=this.estimator.estimate(i);let l=[];for(let i of a.all)l.push([a.getName(i),r.getName(n.curls[i]),o.getName(n.directions[i])]);for(let i of this.gestures){let a=i.matchAgainst(n.curls,n.directions);a>=t&&e.push({name:i.name,score:a})}return{poseData:l,gestures:e}}},GestureDescription:d,Finger:a,FingerCurl:r,FingerDirection:o,Gestures:n}}]).default}));